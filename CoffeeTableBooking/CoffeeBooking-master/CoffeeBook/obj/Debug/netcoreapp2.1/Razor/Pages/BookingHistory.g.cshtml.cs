#pragma checksum "C:\Users\darsh\Documents\GitHub\DarshanaDotNet\CoffeeBooking\CoffeeBook\Pages\BookingHistory.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ab49e23cb90da3d83c84242d3db619074dbe30f1"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(CoffeeBooking.Pages.Pages_BookingHistory), @"mvc.1.0.razor-page", @"/Pages/BookingHistory.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.RazorPageAttribute(@"/Pages/BookingHistory.cshtml", typeof(CoffeeBooking.Pages.Pages_BookingHistory), null)]
namespace CoffeeBooking.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\darsh\Documents\GitHub\DarshanaDotNet\CoffeeBooking\CoffeeBook\Pages\_ViewImports.cshtml"
using CoffeeBooking;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"ab49e23cb90da3d83c84242d3db619074dbe30f1", @"/Pages/BookingHistory.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"07f50a5e18a50ca5b5dec9f7946a41677d1f9df2", @"/Pages/_ViewImports.cshtml")]
    public class Pages_BookingHistory : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(42, 89, true);
            WriteLiteral("<div>\r\n    <h1> Booking History</h1>\r\n    <ul id=\"BookingHistory\">\r\n\r\n    </ul>\r\n</div>\r\n");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(149, 2394, true);
                WriteLiteral(@"
    <script type=""text/javascript"" src=""https://js.api.here.com/v3/3.0/mapsjs-core.js""></script>
    <script type=""text/javascript"" src=""https://js.api.here.com/v3/3.0/mapsjs-service.js""></script>
    <script type=""text/javascript"" src=""https://js.api.here.com/v3/3.0/mapsjs-ui.js""></script>
    <script type=""text/javascript"" src=""https://js.api.here.com/v3/3.0/mapsjs-mapevents.js""></script>
    <script src=""https://cdn.jsdelivr.net/npm/vue/dist/vue.js""></script>

    <script>
        $(function() {
            loadData();
        });
        function loadData() {   
            $.ajax({
                url: 'http://localhost:5000/api/Customers',
                dataType: 'json',
                contentType: 'application/json',
                method: 'GET'
            }).done(function(responseJSON,status,xhr) {
               // alert(status);
                buildHistory(responseJSON);
            }).fail(function(xhr,status,error) {
                
                alert(""There was an");
                WriteLiteral(@" error retrieving the data"");
            });
        }
        $(""#BookingHistory"").on('click', 'a.cancelbook', function() {
            alert(status);
            var id = $(this).parents(""li"").attr('customer-id');
            $.ajax({
                url: 'http://localhost:5000/api/Customers/'+id,
                dataType: 'json',
                contentType: 'application/json',
                method: 'DELETE'
                }).done(function(responseData, status, xhr) {
                alert(status);
                loadData(); 
            }).fail(function(xhr, status, error) {
                
                alert(""There was an error DELETING your customer""+error+""&    &""+status+""&   &""+xhr);
            });
        });
        function buildHistory(customersList){
            $(""#BookingHistory"").empty();
            $.each(customersList,function(index,item){
                var bookings = $('<li customer-id=""'+item.id+'""></li>');
                $(bookings).html('<div><h3>Name");
                WriteLiteral(@"'+item.firstName+ ' '+ item.lastName+'</h3> <div> Contact Number: '+item.contactNo+'</div><div>Table-id:'+item.tableId+'</div></div>');
                $(bookings).append('<a href=""#"" class=""cancelbook"">Cancel Booking</a>');             
                $(""#BookingHistory"").append(bookings);

            });
        } 


    </script>
");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<BookingHistoryModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<BookingHistoryModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<BookingHistoryModel>)PageContext?.ViewData;
        public BookingHistoryModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
